



Internet Engineering Task Force                             N. Kuhn, Ed.
Internet-Draft                                                      CNES
Intended status: Informational                           E. Stephan, Ed.
Expires: June 15, 2020                                            Orange
                                                       G. Fairhurst, Ed.
                                                  University of Aberdeen
                                                       December 13, 2019


               Transport parameters for 0-RTT connections
                      draft-kuhn-quic-0rtt-bdp-05

Abstract

   QUIC 0-RTT enables the optimization of the egress traffic.  It relies
   on the sharing of the "initial_max_data" transport parameter between
   peer consent.  This memo proposes the sharing of additional transport
   parameters to optimize the ingress traffic.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on June 15, 2020.

Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of



Kuhn, et al.              Expires June 15, 2020                 [Page 1]

Internet-Draft             Transport for 0-RTT             December 2019


   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Rationale . . . . . . . . . . . . . . . . . . . . . . . . . .   3
   3.  BDP metadata parameters . . . . . . . . . . . . . . . . . . .   3
     3.1.  Minimum RTT . . . . . . . . . . . . . . . . . . . . . . .   4
     3.2.  Bandwidth . . . . . . . . . . . . . . . . . . . . . . . .   4
     3.3.  Packet loss rate  . . . . . . . . . . . . . . . . . . . .   4
     3.4.  Path MTU  . . . . . . . . . . . . . . . . . . . . . . . .   4
   4.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   4
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   4
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .   4
   7.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   4
     7.1.  Normative References  . . . . . . . . . . . . . . . . . .   5
     7.2.  Informative References  . . . . . . . . . . . . . . . . .   5
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   7

1.  Introduction

   QUIC 0-RTT enables the optimization of the egress traffic.  It relies
   on the sharing of the "initial_max_data" transport parameter between
   peers: it indicates to the client the number of bytes it is allowed
   to send in the first packet sent when reconnecting.

   This memo proposes the sharing of additional transport parameters to
   optimize the ingress traffic exchange at both ends.  The optimization
   of the time-to-service duration depends on both direction
   optimization.  QUIC may not be used for the sole use of HTTP3
   services, but also for symmetrical services.  The client device
   should be able to adapt to the path adaptation chosen by the server.
   Since there are more and more exchange based on subscription where
   the server sends data first, with regard to ossification, it is
   central to dissociate the signalling (aka the initiator of the
   connection) from the peer which first sends application data.

   The memo focuses on cases where with high Bandwidth Delay Product
   (BDP) and constrained situations.  The extension name is 'BDP
   metadata'.  Candidate transport parameters are discussed in Section 3. 








Kuhn, et al.              Expires June 15, 2020                 [Page 2]

Internet-Draft             Transport for 0-RTT             December 2019


2.  Rationale

   QUIC encryption of transport headers prevents the adding of
   Performance-enhancing proxy (PEP).  The BDP metadata extension may be
   a substitute to PEP proxy [RFC2488] [RFC3135] when time-to-service
   improvement requires acceleration of the refilling of client
   application buffers.

   There are cases where egress acceleration like 0-RTT early data alone
   does not improve the time-to-service.  While initial_max_data
   improves the egress time to server, the BDP metadata extension aims
   at improving ingress traffic delivery.  Improving the ingress traffic
   can result in significant improvement to the quality-of-experience.
   This enables the use of transport parameters to adapt the initial
   data transmission of a 0-RTT connection.  In some large BDP
   deployment scenarios, this can halve the page load time of a web page
   download.

   There are reconnection situation where the time-to-service depends
   only on server data arrival because the service logic does not
   requires any additional information from the client.

   Currently each side has its proprietary solution to measure and to
   store path characteristics.  Having a standard way to share these
   parameters will allow the client to prepare the right resources and
   should improve the adaptation to non-default path characteristics.

   Avoid peers to compute the same path characteristics and decide
   opposed strategies: When the BDP is high the server may decide to
   increase the data on the flight while a resource-limited client will
   decide, as the ingress is expected to be slow, to reduce the
   resources.

   Having a symmetrical optimization reduces ossification.  Having the
   server to share the path characteristics avoid duplicate works and
   allows resource-limited client to save resources like CPU, memory and
   power.  Tune the default transport parameters of network paths which
   have path characteristics that increase the time-to-service.

3.  BDP metadata parameters

   Acording to section 7.3.1 of QUIC transport 'Both endpoints store the value of the server transport parameters
   from a connection and apply them to any 0-RTT packets that are sent in subsequent connections to that peer'.
   
   Amongst the six mandatory initial parameters that section 7.3.1 defines, only initial_max_data improves the TTS of the 0-RTT.
   The BDP metadata extension augments the list of server transport parameters that are shared with the client to improve the TTS.   
      
   Path characteristics and stack parameters listed below migh be exchanged as new transport parameters:
   
   o  IW
   
   o  Minimum RTT




Kuhn, et al.              Expires June 15, 2020                 [Page 3]

Internet-Draft             Transport for 0-RTT             December 2019


   o  Bandwidth

   o  Packet loss rate

   o  Path MTU

3.1.  Minimum RTT

   The knowledge of the minimum RTT of a previous connection can improve
   the throughput with slow start adaptation or timers tuning.

3.2.  Bandwidth

   The knowledge of the bandwidth of a previous connection, in
   conjunction with the use of the minimum RTT, can let both client and
   servers prepare (potentially large) buffers accordingly.

3.3.  Packet loss rate

   The knowledge of the packet loss rate of a previous connection can
   help in tuning a coding mechanism.

3.4.  Path MTU

   The knowledge of the PMTU of a previous path improves the performance
   for long file transfers because it reduces the duration of the path
   validation process [I-D.ietf-quic-transport].

4.  Acknowledgements

   The authors would like to thank Gabriel Montenegro, Patrick McManus,
   Ian Swett, Igor Lubashev and Christian Huitema for their fruitful
   comments on earlier versions of this document.

5.  IANA Considerations

   TBD: text is required to register the extension BDP_metadata field. 
   Parameters are registered using the procedure defined https://tools.ietf.org/html/draft-ietf-quic-transport-24#section-22.1

6.  Security Considerations

   The security is provided by the 1-RTT phase.  The measure of BDP is
   made during a previous connection.

7.  References







Kuhn, et al.              Expires June 15, 2020                 [Page 4]

Internet-Draft             Transport for 0-RTT             December 2019


7.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

7.2.  Informative References

   [CONEXT15]
              Li, Q., Dong, M., and P. Godfrey, "Halfback: Running Short
              Flows Quickly and Safely", ACM CoNEXT , 2015.

   [I-D.ietf-quic-http]
              Bishop, M., "Hypertext Transfer Protocol Version 3
              (HTTP/3)", draft-ietf-quic-http-24 (work in progress),
              November 2019.

   [I-D.ietf-quic-recovery]
              Iyengar, J. and I. Swett, "QUIC Loss Detection and
              Congestion Control", draft-ietf-quic-recovery-24 (work in
              progress), November 2019.

   [I-D.ietf-quic-tls]
              Thomson, M. and S. Turner, "Using TLS to Secure QUIC",
              draft-ietf-quic-tls-24 (work in progress), November 2019.

   [I-D.ietf-quic-transport]
              Iyengar, J. and M. Thomson, "QUIC: A UDP-Based Multiplexed
              and Secure Transport", draft-ietf-quic-transport-24 (work
              in progress), November 2019.

   [I-D.ietf-tls-ticketrequests]
              Pauly, T., Schinazi, D., and C. Wood, "TLS Ticket
              Requests", draft-ietf-tls-ticketrequests-04 (work in
              progress), November 2019.

   [I-D.irtf-iccrg-sallantin-initial-spreading]
              Sallantin, R., Baudoin, C., Arnal, F., Dubois, E., Chaput,
              E., and A. Beylot, "Safe increase of the TCP's Initial
              Window Using Initial Spreading", draft-irtf-iccrg-
              sallantin-initial-spreading-00 (work in progress), January
              2014.








Kuhn, et al.              Expires June 15, 2020                 [Page 5]

Internet-Draft             Transport for 0-RTT             December 2019


   [I-D.kuehlewind-quic-substrate]
              Kuehlewind, M., Sarker, Z., Fossati, T., and L. Pardue,
              "Use Cases and Requirements for QUIC as a Substrate",
              draft-kuehlewind-quic-substrate-02 (work in progress),
              November 2019.

   [I-D.pauly-quic-datagram]
              Pauly, T., Kinnear, E., and D. Schinazi, "An Unreliable
              Datagram Extension to QUIC", draft-pauly-quic-datagram-05
              (work in progress), November 2019.

   [ICC16]    Sallantin, R., Baudoin, C., Chaput, E., Arnal, F., Dubois,
              E., and A-L. Beylot, "Reducing web latency through TCP IW:
              Be smart", IEEE ICC , 2016.

   [ICCRG100]
              Kuhn, N., "MPTCP and BBR performance over Internet
              satellite paths", IETF ICCRG 100, 2017.

   [IJSCN19]  Thomas, L., Dubois, E., Kuhn, N., and E. Lochin, "Google
              QUIC performance over a public SATCOM access",
              International Journal of Satellite Communications and
              Networking , 2019.

   [NCT13]    Pirovano, A. and F. Garcia, "A new survey on improving TCP
              performances over geostationary satellite link", Network
              and Communication Technologies , 2013.

   [RFC2488]  Allman, M., Glover, D., and L. Sanchez, "Enhancing TCP
              Over Satellite Channels using Standard Mechanisms",
              BCP 28, RFC 2488, DOI 10.17487/RFC2488, January 1999,
              <https://www.rfc-editor.org/info/rfc2488>.

   [RFC3135]  Border, J., Kojo, M., Griner, J., Montenegro, G., and Z.
              Shelby, "Performance Enhancing Proxies Intended to
              Mitigate Link-Related Degradations", RFC 3135,
              DOI 10.17487/RFC3135, June 2001,
              <https://www.rfc-editor.org/info/rfc3135>.

   [RFC6347]  Rescorla, E. and N. Modadugu, "Datagram Transport Layer
              Security Version 1.2", RFC 6347, DOI 10.17487/RFC6347,
              January 2012, <https://www.rfc-editor.org/info/rfc6347>.

   [RFC6349]  Constantine, B., Forget, G., Geib, R., and R. Schrage,
              "Framework for TCP Throughput Testing", RFC 6349,
              DOI 10.17487/RFC6349, August 2011,
              <https://www.rfc-editor.org/info/rfc6349>.




Kuhn, et al.              Expires June 15, 2020                 [Page 6]

Internet-Draft             Transport for 0-RTT             December 2019


   [RFC6928]  Chu, J., Dukkipati, N., Cheng, Y., and M. Mathis,
              "Increasing TCP's Initial Window", RFC 6928,
              DOI 10.17487/RFC6928, April 2013,
              <https://www.rfc-editor.org/info/rfc6928>.

   [RFC7413]  Cheng, Y., Chu, J., Radhakrishnan, S., and A. Jain, "TCP
              Fast Open", RFC 7413, DOI 10.17487/RFC7413, December 2014,
              <https://www.rfc-editor.org/info/rfc7413>.

   [RFC8446]  Rescorla, E., "The Transport Layer Security (TLS) Protocol
              Version 1.3", RFC 8446, DOI 10.17487/RFC8446, August 2018,
              <https://www.rfc-editor.org/info/rfc8446>.

Authors' Addresses

   Nicolas Kuhn (editor)
   CNES

   Email: nicolas.kuhn@cnes.fr


   Emile Stephan (editor)
   Orange

   Email: emile.stephan@orange.com


   Gorry Fairhurst (editor)
   University of Aberdeen

   Email: gorry@erg.abdn.ac.uk




















Kuhn, et al.              Expires June 15, 2020                 [Page 7]
