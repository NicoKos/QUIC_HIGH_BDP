



Internet Engineering Task Force                             N. Kuhn, Ed.
Internet-Draft                                                      CNES
Intended status: Informational                           E. Stephan, Ed.
Expires: June 18, 2020                                            Orange
                                                       G. Fairhurst, Ed.
                                                  University of Aberdeen
                                                       December 16, 2019


               Transport parameters for 0-RTT connections
                      draft-kuhn-quic-0rtt-bdp-05

Abstract

   QUIC 0-RTT enables the optimization of the egress traffic.  It relies
   on the sharing of the "initial_max_data" transport parameter between
   peer consent.  This memo proposes the sharing of additional transport
   parameters to optimize the ingress traffic.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on June 18, 2020.

Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of



Kuhn, et al.              Expires June 18, 2020                 [Page 1]

Internet-Draft             Transport for 0-RTT             December 2019


   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Rationale . . . . . . . . . . . . . . . . . . . . . . . . . .   2
   3.  BDP metadata parameters . . . . . . . . . . . . . . . . . . .   3
   4.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   4
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   4
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .   5
   7.  Informative References  . . . . . . . . . . . . . . . . . . .   5
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   5

1.  Introduction

   QUIC 0-RTT enables the optimization of the egress traffic.  It relies
   on the sharing of the "initial_max_data" transport parameter between
   peers: it indicates to the client the number of bytes it is allowed
   to send in the first packet sent when reconnecting.

   This memo proposes the sharing of additional transport parameters to
   optimize the ingress traffic exchange at both ends.  The optimization
   of the time-to-service duration depends on both direction
   optimization.  QUIC may not be used for the sole use of HTTP3
   services, but also for symmetrical services.  The client device
   should be able to adapt to the path adaptation chosen by the server.
   Since there are more and more exchange based on subscription where
   the server sends data first, with regard to ossification, it is
   central to dissociate the signalling (aka the initiator of the
   connection) from the peer which first sends application data.

   The memo focuses on cases with high Bandwidth Delay Product (BDP) and
   constrained situations.  The extension name is 'BDP metadata'.
   Candidate transport parameters are discussed in Section 3.

2.  Rationale

   QUIC encryption of transport headers prevents the adding of
   Performance-enhancing proxy (PEP).  The BDP metadata extension may be
   a substitute to PEP proxy [RFC2488] [RFC3135] when time-to-service
   improvement requires acceleration of the refilling of client
   application buffers.

   There are cases where egress acceleration like 0-RTT early data alone
   does not improve the time-to-service.  While initial_max_data
   improves the egress time to server, the BDP metadata extension aims
   at improving ingress traffic delivery.  Improving the ingress traffic



Kuhn, et al.              Expires June 18, 2020                 [Page 2]

Internet-Draft             Transport for 0-RTT             December 2019


   can result in significant improvement to the quality-of-experience.
   This enables the use of transport parameters to adapt the initial
   data transmission of a 0-RTT connection.  In some large BDP
   deployment scenarios, this can halve the page load time of a web page
   download.

   There are reconnection situation where the time-to-service depends
   only on server data arrival because the service logic does not
   requires any additional information from the client.

   Currently each side has its proprietary solution to measure and to
   store path characteristics.  Having a standard way to share these
   parameters will allow the client to prepare the right resources and
   should improve the adaptation to non-default path characteristics.

   Avoid peers to compute the same path characteristics and decide
   opposed strategies: When the BDP is high the server may decide to
   increase the data on the flight while a resource-limited client will
   decide, as the ingress is expected to be slow, to reduce the
   resources.

   Having a symmetrical optimization reduces ossification.  Having the
   server to share the path characteristics avoid duplicate works and
   allows resource-limited client to save resources like CPU, memory and
   power.  Tune the default transport parameters of network paths which
   have path characteristics that increase the time-to-service.

3.  BDP metadata parameters

   Acording to [I-D.ietf-quic-transport], both endpoints store the value
   of the server transport parameters from a connection and apply them
   to any 0-RTT packets that are sent in subsequent connections to that
   peer.  Amongst the six mandatory initial parameters that section
   7.3.1 defines, only initial_max_data improves the time-to-service of
   the 0-RTT connection.  The BDP metadata extension augments the list
   of server transport parameters that are shared with the client to
   improve the time-to-service and save resource like CPU, memory and
   power.

   Path characteristics and stack parameters listed below migh be
   exchanged as new transport parameter:

   o  Initial window (IW)

   o  RTT

   o  Bandwidth




Kuhn, et al.              Expires June 18, 2020                 [Page 3]

Internet-Draft             Transport for 0-RTT             December 2019


   o  Loss rate

   o  MTU

   o  Asymmetry

   Figure 1 provide more details on the parameters that can be
   exchanged.  The variables have been extracted from
   [I-D.ietf-quic-recovery].

             +-----------------+---------+--------------------------+
             |usefull          |transport|computed param            |
             |variables        |param    |                          |
             |                 |(yes/no) |                          |
   +---------+-----------------+---------+--------------------------+
   |IW       |initial_max_data | yes     |                          |
   +---------+-----------------+---------+--------------------------+
   |RTT      |min_rtt          | no      |                          |
   +---------+-----------------+---------+--------------------------+
   |Bandwidth|congestion_window| no      |bdp=                      |
   |         |                 |         | min_rtt*congestion_window|
   +---------+-----------------+---------+--------------------------+
   |Loss     |lost_packets     | no      |loss_ratio=               |
   |rate     |sent_packets     | no      | lost_packets/sent_packets|
   +---------+-----------------+---------+--------------------------+
   |MTU      |max_packet_size  | yes     |                          |
   +---------+-----------------+---------+--------------------------+
   |Asymmetry|                 |         |asymmetry=TBD             |
   +---------+-----------------+---------+--------------------------+

                      Figure 1: BDP metadata detailed

4.  Acknowledgements

   The authors would like to thank Gabriel Montenegro, Patrick McManus,
   Ian Swett, Igor Lubashev and Christian Huitema for their fruitful
   comments on earlier versions of this document.

5.  IANA Considerations

   TBD: text is required to register the extension BDP_metadata field.
   Parameters are registered using the procedure defined in
   [I-D.ietf-quic-transport].








Kuhn, et al.              Expires June 18, 2020                 [Page 4]

Internet-Draft             Transport for 0-RTT             December 2019


6.  Security Considerations

   The security is provided by the 1-RTT phase.  The measure of BDP is
   made during a previous connection.

7.  Informative References

   [I-D.ietf-quic-recovery]
              Iyengar, J. and I. Swett, "QUIC Loss Detection and
              Congestion Control", draft-ietf-quic-recovery-24 (work in
              progress), November 2019.

   [I-D.ietf-quic-transport]
              Iyengar, J. and M. Thomson, "QUIC: A UDP-Based Multiplexed
              and Secure Transport", draft-ietf-quic-transport-24 (work
              in progress), November 2019.

   [RFC2488]  Allman, M., Glover, D., and L. Sanchez, "Enhancing TCP
              Over Satellite Channels using Standard Mechanisms",
              BCP 28, RFC 2488, DOI 10.17487/RFC2488, January 1999,
              <https://www.rfc-editor.org/info/rfc2488>.

   [RFC3135]  Border, J., Kojo, M., Griner, J., Montenegro, G., and Z.
              Shelby, "Performance Enhancing Proxies Intended to
              Mitigate Link-Related Degradations", RFC 3135,
              DOI 10.17487/RFC3135, June 2001,
              <https://www.rfc-editor.org/info/rfc3135>.

Authors' Addresses

   Nicolas Kuhn (editor)
   CNES

   Email: nicolas.kuhn@cnes.fr


   Emile Stephan (editor)
   Orange

   Email: emile.stephan@orange.com


   Gorry Fairhurst (editor)
   University of Aberdeen

   Email: gorry@erg.abdn.ac.uk





Kuhn, et al.              Expires June 18, 2020                 [Page 5]
